language: minimal
dist: xenial
addons:
  apt:
    sources:
      - docker-xenial

env:
  global:
  # The following variables are setup via project settings:
  # DOCKER_HUB_TOKEN
  # DOCKER_SLUG
  # DOCKER_USERNAME
  # DOCKER_PASSWORD
  matrix:
  # legacy
  - VERSION=1.0.0-ubuntu
  - VERSION=1.0.1-ubuntu
  - VERSION=1.0.2-ubuntu
  - VERSION=1.0.3-ubuntu
  - VERSION=1.0.4-debian
  ######################### 
  - VERSION=1.0-ubuntu
  - VERSION=1.1-ubuntu
  - VERSION=1.2-ubuntu
  - VERSION=1.3-ubuntu
  - VERSION=2.0-debian
  - VERSION=2.1-debian
  - VERSION=2.2-debian
  - VERSION=2.3-debian
  - VERSION=2.4-debian
  


before_install:
- sudo .ci/01_before_install.sh

script:
- make -C .ci build v=${VERSION} prod=false      # Set prod=true, if you want to build NO '-dev' tag
- make -C .ci tags REPO=$DOCKER_SLUG prod=false  # Set prod=true, if you want tags NO '-dev' tag

notifications:
  # don't notify me when things fail
  email: false